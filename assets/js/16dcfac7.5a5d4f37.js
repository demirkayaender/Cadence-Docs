"use strict";(globalThis.webpackChunkcadence=globalThis.webpackChunkcadence||[]).push([[1064],{28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>i});var l=s(96540);const c={},r=l.createContext(c);function a(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),l.createElement(r.Provider,{value:n},e.children)}},45754:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"codelabs/helm-deploy-postgres-opensearch","title":"Deploy Cadence with Helm on GKE (PostgreSQL + OpenSearch)","description":"A video companion to this Codelab is available on our YouTube channel:","source":"@site/docs/00-codelabs/02-helm-deploy-postgres-opensearch.md","sourceDirName":"00-codelabs","slug":"/codelabs/helm-deploy-postgres-opensearch","permalink":"/Cadence-Docs/docs/codelabs/helm-deploy-postgres-opensearch","draft":false,"unlisted":false,"editUrl":"https://github.com/cadence-workflow/Cadence-Docs/tree/master/docs/00-codelabs/02-helm-deploy-postgres-opensearch.md","tags":[],"version":"current","lastUpdatedBy":"Kevin Burns","lastUpdatedAt":1769466722000,"sidebarPosition":2,"frontMatter":{"layout":"default","title":"Deploy Cadence with Helm on GKE (PostgreSQL + OpenSearch)","permalink":"/docs/codelabs/helm-deploy-postgres-opensearch"},"sidebar":"docsSidebar","previous":{"title":"How To Write Tests With Workflow Replayer and Shadower","permalink":"/Cadence-Docs/docs/codelabs/workflow-tests-go-replayer-shadower"},"next":{"title":"Introduction","permalink":"/Cadence-Docs/docs/java-client/"}}');var c=s(74848),r=s(28453);const a={layout:"default",title:"Deploy Cadence with Helm on GKE (PostgreSQL + OpenSearch)",permalink:"/docs/codelabs/helm-deploy-postgres-opensearch"},i=void 0,o={},t=[{value:"Codelab Overview",id:"codelab-overview",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"What you&#39;ll build",id:"what-youll-build",level:3},{value:"Step 0: Set up your local tools",id:"step-0-set-up-your-local-tools",level:3},{value:"Prerequisites",id:"prerequisites-1",level:4},{value:"Authenticate and configure GCloud",id:"authenticate-and-configure-gcloud",level:4},{value:"Get Cadence Helm Charts",id:"get-cadence-helm-charts",level:4},{value:"Step 1: Connect to your GKE cluster and create a namespace",id:"step-1-connect-to-your-gke-cluster-and-create-a-namespace",level:3},{value:"Connect kubectl to your cluster",id:"connect-kubectl-to-your-cluster",level:4},{value:"Create a namespace for Cadence",id:"create-a-namespace-for-cadence",level:4},{value:"Step 2: Review the Helm values file",id:"step-2-review-the-helm-values-file",level:3},{value:"View the values file",id:"view-the-values-file",level:4},{value:"Step 3: Install Cadence with Helm",id:"step-3-install-cadence-with-helm",level:3},{value:"Add required Helm repositories",id:"add-required-helm-repositories",level:4},{value:"Build chart dependencies",id:"build-chart-dependencies",level:4},{value:"Install Cadence",id:"install-cadence",level:4},{value:"Verify installation",id:"verify-installation",level:4},{value:"Step 4: Access Cadence services",id:"step-4-access-cadence-services",level:3},{value:"Port-forward to Cadence services",id:"port-forward-to-cadence-services",level:4},{value:"Step 5: Create a sample domain",id:"step-5-create-a-sample-domain",level:3},{value:"Step 6: Clean up (optional)",id:"step-6-clean-up-optional",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"Installation Issues",id:"installation-issues",level:4},{value:"Schema Job Issues",id:"schema-job-issues",level:4},{value:"OpenSearch Issues",id:"opensearch-issues",level:4},{value:"Kafka Issues",id:"kafka-issues",level:4},{value:"General Debugging",id:"general-debugging",level:4},{value:"References",id:"references",level:3},{value:"Cadence Resources",id:"cadence-resources",level:4},{value:"Kubernetes and Helm",id:"kubernetes-and-helm",level:4},{value:"Google Cloud Platform",id:"google-cloud-platform",level:4},{value:"Database and Search",id:"database-and-search",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"A video companion to this Codelab is available on our YouTube channel:"})}),"\n",(0,c.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/atlIDsDunAo?si=pYmNKKIOSUJPuSzT",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,c.jsx)(n.h2,{id:"codelab-overview",children:"Codelab Overview"}),"\n",(0,c.jsx)(n.p,{children:"This codelab walks you through deploying Cadence on GKE using official Helm charts with PostgreSQL, Kafka, and OpenSearch for advanced visibility."}),"\n",(0,c.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Google Cloud project with billing enabled"}),"\n",(0,c.jsxs)(n.li,{children:["An existing GKE cluster with kubectl access","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["If you need to create a cluster, see ",(0,c.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-zonal-cluster",children:"Creating a GKE cluster"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.li,{children:"Basic familiarity with terminal commands"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"what-youll-build",children:"What you'll build"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"A complete Cadence deployment (frontend, history, matching, worker)"}),"\n",(0,c.jsx)(n.li,{children:"PostgreSQL as the main persistence store"}),"\n",(0,c.jsx)(n.li,{children:"Kafka for visibility event streaming"}),"\n",(0,c.jsx)(n.li,{children:"OpenSearch v2 for advanced visibility"}),"\n",(0,c.jsx)(n.li,{children:"Cadence Web UI for workflow monitoring"}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-0-set-up-your-local-tools",children:"Step 0: Set up your local tools"}),"\n",(0,c.jsx)(n.p,{children:"This step ensures you have the necessary tools installed and configured. The examples below use macOS commands, but the official documentation links provide instructions for all platforms."}),"\n",(0,c.jsx)(n.h4,{id:"prerequisites-1",children:"Prerequisites"}),"\n",(0,c.jsx)(n.p,{children:"You'll need these tools installed locally:"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Google Cloud SDK (gcloud)"})," - Manages GCP resources and authentication"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Install instructions: ",(0,c.jsx)(n.a,{href:"https://cloud.google.com/sdk/docs/install",children:"https://cloud.google.com/sdk/docs/install"})]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"kubectl"})," - Kubernetes command-line tool for cluster management"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Install instructions: ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/tools/",children:"https://kubernetes.io/docs/tasks/tools/"})]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Helm"})," - Kubernetes package manager"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Install instructions: ",(0,c.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"https://helm.sh/docs/intro/install/"})]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Quick install (macOS with Homebrew):"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"brew install --cask google-cloud-sdk\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"brew install kubectl\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"brew install helm\n"})}),"\n",(0,c.jsx)(n.h4,{id:"authenticate-and-configure-gcloud",children:"Authenticate and configure GCloud"}),"\n",(0,c.jsx)(n.p,{children:"Initialize gcloud (interactive setup):"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud init\n"})}),"\n",(0,c.jsx)(n.p,{children:"Or configure manually:"}),"\n",(0,c.jsx)(n.p,{children:"Log in to your Google account:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud auth login\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Set your GCP project (replace ",(0,c.jsx)(n.code,{children:"<YOUR_GCP_PROJECT_ID>"})," with your actual project ID):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud config set project <YOUR_GCP_PROJECT_ID>\n"})}),"\n",(0,c.jsx)(n.admonition,{title:"Finding your project ID",type:"tip",children:(0,c.jsxs)(n.p,{children:["Run ",(0,c.jsx)(n.code,{children:"gcloud projects list"})," or check the project dropdown in the ",(0,c.jsx)(n.a,{href:"https://console.cloud.google.com",children:"Cloud Console"}),"."]})}),"\n",(0,c.jsx)(n.p,{children:"Set your preferred region:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud config set compute/region us-central1\n"})}),"\n",(0,c.jsx)(n.admonition,{title:"GKE Autopilot",type:"note",children:(0,c.jsx)(n.p,{children:"Autopilot clusters are regional, so you only need to set the region. The zone setting below is optional and only needed for zonal resources."})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud config set compute/zone us-central1-a\n"})}),"\n",(0,c.jsx)(n.h4,{id:"get-cadence-helm-charts",children:"Get Cadence Helm Charts"}),"\n",(0,c.jsx)(n.p,{children:"This codelab uses the local charts approach. Clone the repository:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/cadence-workflow/cadence-charts.git\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd cadence-charts\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Alternative approach:"})," Use the remote Helm repository (not used in this codelab):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm repo add cadence https://cadence-workflow.github.io/cadence-charts\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm repo update\n"})}),"\n",(0,c.jsx)(n.admonition,{title:"Remote Helm repo",type:"note",children:(0,c.jsxs)(n.p,{children:["If using the remote repo, replace ",(0,c.jsx)(n.code,{children:"./charts/cadence"})," with ",(0,c.jsx)(n.code,{children:"cadence/cadence"})," in install commands."]})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-1-connect-to-your-gke-cluster-and-create-a-namespace",children:"Step 1: Connect to your GKE cluster and create a namespace"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Prerequisites:"})," You need an existing GKE cluster. In many organizations, platform or infra teams manage cluster creation. If you need to create a cluster yourself, see the official documentation: ",(0,c.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-zonal-cluster",children:"Creating a GKE cluster"})]}),"\n",(0,c.jsxs)(n.p,{children:["For this guide, we'll assume your cluster is named ",(0,c.jsx)(n.code,{children:"cadence-test-gke-1"}),". Replace this with your actual cluster name in the commands below."]}),"\n",(0,c.jsx)(n.h4,{id:"connect-kubectl-to-your-cluster",children:"Connect kubectl to your cluster"}),"\n",(0,c.jsxs)(n.p,{children:["Get credentials for your existing GKE cluster (replace ",(0,c.jsx)(n.code,{children:"cadence-test-gke-1"})," with your cluster name):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters get-credentials cadence-test-gke-1\n"})}),"\n",(0,c.jsxs)(n.admonition,{title:"Cluster not found?",type:"note",children:[(0,c.jsx)(n.p,{children:"If this command fails (404, not found), you may need to specify the region or zone where your cluster is located:"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters get-credentials cadence-test-gke-1 --region us-central1\n"})})]}),"\n",(0,c.jsx)(n.p,{children:"Verify the connection by listing nodes:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl get nodes\n"})}),"\n",(0,c.jsxs)(n.p,{children:["You should see a list of nodes in your cluster with a ",(0,c.jsx)(n.code,{children:"Ready"})," status."]}),"\n",(0,c.jsx)(n.h4,{id:"create-a-namespace-for-cadence",children:"Create a namespace for Cadence"}),"\n",(0,c.jsx)(n.p,{children:"Namespaces provide logical isolation within the cluster:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl create namespace cadence-postgres-os2\n"})}),"\n",(0,c.jsx)(n.p,{children:"Verify the namespace was created:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl get namespace cadence-postgres-os2\n"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-2-review-the-helm-values-file",children:"Step 2: Review the Helm values file"}),"\n",(0,c.jsx)(n.p,{children:"This codelab uses the official example values file that configures Cadence with:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"PostgreSQL"})," - Main persistence store for workflow data"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Kafka"})," - Event streaming for visibility events (KRaft mode, no ZooKeeper)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"OpenSearch v2"})," - Advanced visibility search and filtering (ES v7 API compatible)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Cadence services"})," - Frontend, history, matching, worker"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"The Cadence Helm chart includes subcharts for all dependencies, so everything deploys together automatically."}),"\n",(0,c.jsx)(n.h4,{id:"view-the-values-file",children:"View the values file"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cat charts/cadence/examples/values.postgres-os2.yaml\n"})}),"\n",(0,c.jsx)(n.p,{children:"The values file is well-commented and describes each configuration option. Key points:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"OpenSearch"})," uses the official OpenSearch Helm chart (not Bitnami)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Security is disabled"})," for demo purposes\u2014enable for production"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Kafka topic provisioning"})," is enabled to avoid race conditions"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"GKE Autopilot compatible"})," with appropriate security contexts"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"For production environments,"})," consider using managed services (Cloud SQL, Amazon OpenSearch Service, Confluent Cloud) or enabling security features."]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-3-install-cadence-with-helm",children:"Step 3: Install Cadence with Helm"}),"\n",(0,c.jsx)(n.h4,{id:"add-required-helm-repositories",children:"Add required Helm repositories"}),"\n",(0,c.jsxs)(n.p,{children:["First, ensure you're in the ",(0,c.jsx)(n.code,{children:"cadence-charts"})," directory:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd cadence-charts\n"})}),"\n",(0,c.jsx)(n.p,{children:"Add the Bitnami repo (for PostgreSQL and Kafka):"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm repo add bitnami https://charts.bitnami.com/bitnami\n"})}),"\n",(0,c.jsx)(n.p,{children:"Add the OpenSearch repo:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm repo add opensearch https://opensearch-project.github.io/helm-charts/\n"})}),"\n",(0,c.jsx)(n.p,{children:"Update repos to fetch the latest chart versions:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm repo update\n"})}),"\n",(0,c.jsx)(n.h4,{id:"build-chart-dependencies",children:"Build chart dependencies"}),"\n",(0,c.jsx)(n.p,{children:"Download the dependency charts:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm dependency build ./charts/cadence\n"})}),"\n",(0,c.jsx)(n.h4,{id:"install-cadence",children:"Install Cadence"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install cadence-release ./charts/cadence \\\n  --namespace cadence-postgres-os2 \\\n  -f charts/cadence/examples/values.postgres-os2.yaml \\\n  --wait\n"})}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"--wait"})," flag keeps the command running until all pods are ready (typically 5-10 minutes)."]}),"\n",(0,c.jsx)(n.admonition,{type:"info",children:(0,c.jsx)(n.p,{children:'GKE Autopilot warnings about "autopilot-default-resources-mutator" are normal and not errors.'})}),"\n",(0,c.jsx)(n.h4,{id:"verify-installation",children:"Verify installation"}),"\n",(0,c.jsx)(n.p,{children:"Check that all pods are running:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n cadence-postgres-os2\n"})}),"\n",(0,c.jsx)(n.p,{children:"You should see pods for:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"cadence-release-frontend"}),", ",(0,c.jsx)(n.code,{children:"cadence-release-history"}),", ",(0,c.jsx)(n.code,{children:"cadence-release-matching"}),", ",(0,c.jsx)(n.code,{children:"cadence-release-worker"})]}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"cadence-release-web"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"cadence-release-postgresql"})}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"cadence-release-kafka-controller"}),", ",(0,c.jsx)(n.code,{children:"cadence-release-kafka-broker"})]}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"cadence-release-opensearch-master-0"})}),"\n",(0,c.jsxs)(n.li,{children:["Schema jobs (may show as ",(0,c.jsx)(n.code,{children:"Completed"}),")"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["All pods should show ",(0,c.jsx)(n.code,{children:"Running"})," status (or ",(0,c.jsx)(n.code,{children:"Completed"})," for jobs)."]}),"\n",(0,c.jsx)(n.admonition,{title:"Having issues?",type:"tip",children:(0,c.jsxs)(n.p,{children:["If pods are stuck or crashing, see the ",(0,c.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})," section below."]})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-4-access-cadence-services",children:"Step 4: Access Cadence services"}),"\n",(0,c.jsx)(n.h4,{id:"port-forward-to-cadence-services",children:"Port-forward to Cadence services"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Port-forward the frontend"})," (for CLI access):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward -n cadence-postgres-os2 svc/cadence-release-frontend 7833:7833\n"})}),"\n",(0,c.jsx)(n.p,{children:"Keep this running and open a new terminal."}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Port-forward the Web UI:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward -n cadence-postgres-os2 svc/cadence-release-web 8088:8088\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Access the Web UI"})," at ",(0,c.jsx)(n.a,{href:"http://localhost:8088",children:"http://localhost:8088"})]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-5-create-a-sample-domain",children:"Step 5: Create a sample domain"}),"\n",(0,c.jsxs)(n.p,{children:["A Cadence ",(0,c.jsx)(n.strong,{children:"domain"})," is a namespace for workflows. We'll exec into a frontend pod to use the CLI."]}),"\n",(0,c.jsx)(n.p,{children:"Find a frontend pod:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"POD=$(kubectl get pods -n cadence-postgres-os2 \\\n  -l app.kubernetes.io/component=frontend \\\n  -o jsonpath='{.items[0].metadata.name}')\n"})}),"\n",(0,c.jsx)(n.p,{children:"Register a domain:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'kubectl exec -n cadence-postgres-os2 -it "$POD" -- \\\n  cadence --address cadence-release-frontend:7833 --transport grpc \\\n  --do cadence-samples domain register -rd 1\n'})}),"\n",(0,c.jsx)(n.admonition,{type:"note",children:(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"--transport grpc"})," flag is required because the CLI defaults to tchannel protocol, but port 7833 is the gRPC port."]})}),"\n",(0,c.jsx)(n.p,{children:"Verify domain creation:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'kubectl exec -n cadence-postgres-os2 -it "$POD" -- \\\n  cadence --address cadence-release-frontend:7833 --transport grpc \\\n  --do cadence-samples domain describe\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-6-clean-up-optional",children:"Step 6: Clean up (optional)"}),"\n",(0,c.jsx)(n.admonition,{type:"warning",children:(0,c.jsx)(n.p,{children:"These operations will delete all data."})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Recommended: Delete the namespace"})," (complete cleanup):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl delete namespace cadence-postgres-os2\n"})}),"\n",(0,c.jsx)(n.p,{children:"This removes all resources including PersistentVolumeClaims. Deletion may take a minute."}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Alternative: Helm uninstall"})," (keeps namespace and PVCs):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm uninstall cadence-release -n cadence-postgres-os2\n"})}),"\n",(0,c.jsx)(n.admonition,{type:"note",children:(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"helm uninstall"})," intentionally preserves PersistentVolumeClaims to prevent accidental data loss. To fully clean up after helm uninstall:"]})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl delete pvc --all -n cadence-postgres-os2\n"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,c.jsx)(n.h4,{id:"installation-issues",children:"Installation Issues"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Pods stuck in Pending:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl describe pod <pod-name> -n cadence-postgres-os2\n"})}),"\n",(0,c.jsx)(n.p,{children:"Look for resource or quota issues. Scale up your cluster or reduce resource requests."}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Helm install times out:"})}),"\n",(0,c.jsxs)(n.p,{children:["Remove ",(0,c.jsx)(n.code,{children:"--wait"})," and monitor manually:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n cadence-postgres-os2 -w\n"})}),"\n",(0,c.jsx)(n.h4,{id:"schema-job-issues",children:"Schema Job Issues"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Check schema job status:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl get jobs -n cadence-postgres-os2\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Jobs should show ",(0,c.jsx)(n.code,{children:"COMPLETIONS"})," as ",(0,c.jsx)(n.code,{children:"1/1"}),"."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"View PostgreSQL schema job logs:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl logs job/cadence-release-schema-postgresql -n cadence-postgres-os2 --tail=100\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"View OpenSearch schema job logs:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl logs job/cadence-release-schema-elasticsearch -n cadence-postgres-os2 --tail=100\n"})}),"\n",(0,c.jsx)(n.p,{children:"Look for connection errors or permission issues. Schema jobs typically fail if the database or search service isn't ready yet."}),"\n",(0,c.jsx)(n.h4,{id:"opensearch-issues",children:"OpenSearch Issues"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"OpenSearch not starting:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n cadence-postgres-os2 -l app.kubernetes.io/name=opensearch\nkubectl logs -n cadence-postgres-os2 cadence-release-opensearch-master-0 --tail=100\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Test OpenSearch connectivity:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward -n cadence-postgres-os2 svc/cadence-release-opensearch 9200:9200\ncurl -s http://localhost:9200/cadence-visibility-os2\n"})}),"\n",(0,c.jsx)(n.h4,{id:"kafka-issues",children:"Kafka Issues"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Kafka pods not starting:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n cadence-postgres-os2 -l app.kubernetes.io/name=kafka\nkubectl logs -n cadence-postgres-os2 -l app.kubernetes.io/component=controller --tail=100\n"})}),"\n",(0,c.jsx)(n.h4,{id:"general-debugging",children:"General Debugging"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"kubectl get all -n cadence-postgres-os2\nkubectl logs -n cadence-postgres-os2 <pod-name> --tail=100\nkubectl describe pod -n cadence-postgres-os2 <pod-name>\nhelm status cadence-release -n cadence-postgres-os2\n"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"references",children:"References"}),"\n",(0,c.jsx)(n.h4,{id:"cadence-resources",children:"Cadence Resources"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://github.com/cadence-workflow/cadence-charts",children:"Cadence Helm Charts Repository"})})," - Source repository for the Helm charts"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://github.com/cadence-workflow/cadence-charts/tree/main/charts/cadence",children:"Cadence Helm Chart README"})})," - Detailed configuration options"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://cadenceworkflow.io/docs/cli/",children:"Cadence CLI Documentation"})})," - CLI reference for managing domains and workflows"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"kubernetes-and-helm",children:"Kubernetes and Helm"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"Helm Installation"})})," - Installing Helm"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/",children:"kubectl Overview"})})," - Kubernetes CLI reference"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"google-cloud-platform",children:"Google Cloud Platform"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://cloud.google.com/sdk/docs/install",children:"Google Cloud SDK Installation"})})," - Install gcloud CLI"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-zonal-cluster",children:"Creating a GKE Cluster"})})," - GKE cluster creation guide"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"database-and-search",children:"Database and Search"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://artifacthub.io/packages/helm/bitnami/postgresql",children:"PostgreSQL on Kubernetes (Bitnami)"})})," - Bitnami PostgreSQL Helm chart"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://opensearch.org/docs/latest/",children:"OpenSearch Documentation"})})," - OpenSearch official documentation"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.a,{href:"https://github.com/opensearch-project/helm-charts",children:"OpenSearch Helm Charts"})})," - Official OpenSearch Helm charts"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}}}]);